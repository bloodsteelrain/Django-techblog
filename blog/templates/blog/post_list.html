{% extends 'base.html' %}
{% load static %}

{% block content %}
  <p>게시글 목록 화면입니다.</p>

  <div class="category-menu">
    <h4>카테고리</h4>
    <ul>
      <li>
        <a href="{% url 'blog:list' %}" class="btn">전체</a>
      </li>
      {% for category in categories %}
        <li>
          <a href="{% url 'blog:category' c_name=category.name %}" class="btn">{{ category.name }}</a>
        </li>
      {% endfor %}
    </ul>
  </div>

  <div class="post-list">
    <form action="{% url 'blog:write' %}" method="get">
      <input type="submit" value="글 작성" class="btn btn-outline-success">
    </form>
    {% if posts %}
      <table class="table table-boardered">
        <thead class='table-light'>
          <tr>
            <td>번호</td>
            <td>카테고리</td>
            <td>제목</td>
            <td>작성자</td>
            <td>작성일</td>
            <td>조회수</td>
          </tr>
        </thead>
        <tbody>
          {% for post in posts %}
            <tr>
              <td>{{ forloop.revcounter }}</td>
              <td>{{ post.category }}</td>
              <td>
                <a href="{% url 'blog:detail' pk=post.pk %}" class="btn">{{ post.title }}</a>
              </td>
              <td>{{ post.writer }}</td>
              <td>{{ post.created_at | date:"y.m.d" }}</td>
              <td>{{ post.views }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>작성된 게시물이 없습니다.</p>
    {% endif %}
  </div>

  <form action="{% url 'blog:list' %}" method="get">
    <select id="search_option" name="search_option">
      <option value="title+content" selected="selected">제목+내용</option>
      <option value="title">제목</option>
      <option value="content">내용</option>
      <option value="writer">작성자</option>
      <option value="all">전체</option>
      <option value="tags">태그</option>
    </select>
    <input type="text" name="q" id="search" value="{{ query|default_if_none:'' }}" placeholder="Search...">
    <button class="btn btn-outline-success" type="submit">검색</button>
  </form>
  <!-- main -->
  <main>
    <!-- posts -->
    <div class="max-width">
      <h2 class="a11y-hidden">Post</h2>
      {% if posts %}
        <ul class="posts">
          {% for post in posts %}
            <li>
              <a href="{% url 'blog:detail' pk=post.pk %}" class="post">
                <article>
                  {% if post.image %}
                    <img src="{{ post.image.url }}" alt="{{ post.title }}"/>
                  {% else %}
                    <img src="{% static 'image/noimage.jpg' %}" alt=""/>
                  {% endif %}
                  <div class="contents-wrap">
                    <!-- category -->
                    <dl class="category">
                      <dt class="a11y-hidden">Category</dt>
                      <dd>{{ post.category }}</dd>
                    </dl>
                    <!-- //category -->

                    <h3>{{ post.title }}</h3>

                    <!-- author -->
                    <dl class="author-wrap">
                      <dt class="a11y-hidden">Author</dt>
                      <dd class="author"><img src="./images/profile.jpg" alt=""/>
                        {{ post.writer }}</dd>
                      <dt class="a11y-hidden">Created</dt>
                      <dd class="created">{{ post.created_at | date:"y.m.d" }}</dd>
                    </dl>
                    <!-- //author -->

                    <p class="post-description">
                      {{ post.content }}
                    </p>
                  </div>
                </article>
              </a>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p>작성된 게시물이 없습니다.</p>
      {% endif %}
      <!-- //posts -->

      <!-- about -->
      <aside class="about">
        <h2>About Me</h2>
        <img src="./images/profile.jpg" alt="" class="user-profile"/>
        <p class="user-name">{{ user.username }}</p>
        <p class="user-description">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
        <h3>Categories</h3>
        <ul class="categories">
          <li>
            <a href="{% url 'blog:list' %}">전체</a>
          </li>
          {% for category in categories %}
            <li>
              <a href="{% url 'blog:category' c_name=category.name %}">{{ category.name }}</a>
            </li>
          {% endfor %}
        </ul>
        <h3>Follow</h3>
        <ul class="sns">
          <li>
            <a href="#">
              <img src="./assets/Facebook.svg" alt="Facebook"/>
            </a>
          </li>
          <li>
            <a href="#">
              <img src="./assets/Twitter.svg" alt="Twitter"/>
            </a>
          </li>
          <li>
            <a href="#">
              <img src="./assets/Instagram.svg" alt="Instagram"/>
            </a>
          </li>
          <li>
            <a href="#">
              <img src="./assets/Github.svg" alt="GitHub"/>
            </a>
          </li>
        </ul>
      </aside>
      <!-- //about -->
    </div>
  </main>
  <!-- //main -->
{% endblock %}
